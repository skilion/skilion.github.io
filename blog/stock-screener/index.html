<!doctype html><html lang=en><head><meta charset=utf-8><script async src="https://www.googletagmanager.com/gtag/js?id=G-64J3C3W6RC"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-64J3C3W6RC")</script><title>Stock Market Screener Demo &ndash; Andrea Radaelli</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/syntax.css><link rel=icon href=/favicon.ico type=image/x-icon><link rel=alternate type=application/rss+xml href=/blog/index.xml title="Andrea Radaelli's Blog"></head><body><header><nav><a href=/>Home</a>
<a href=/about/>About</a></nav></header><main><article class=article-container><div class=article-content><h1>Stock Market Screener Demo</h1><p class=page-date>15 December 2021</p><p>In the last couple of years I have been actively investing my savings in the Stock Market. I have learned a lot on how finance works but long story short, I am not interested in investing in the stock market anymore since I came to realize that:</p><ol><li>I don&rsquo;t own enough capital to make substantial returns</li><li>Beating the market average is difficult (it requires a <em>lot</em> of time)</li></ol><p>Therefore I&rsquo;m better off by focusing on my job and investing in <strong>myself</strong> rather than than the stock market. At least for the next 5 years or so.</p><p>My surplus money can track the market average and I stay clear from crypto, on which I am not willing to risk any substantial amount of money, but that&rsquo;s for another post.</p><p>Anyway, before my crush on the stock market faded-and feeding off my engineering spirit-I was fascinated by the idea of developing my own <a href=https://en.wikipedia.org/wiki/Automated_trading_system>trading bots</a>.</p><p>Developing trading strategies needs at minimum:</p><ol><li>A strategy (duh!)</li><li>Market data to backtest the strategy</li></ol><p>I decided to focus on market data first, and I quickly realized that there is no real good free source of it, unless you want to pay $$$. Then I found out about <a href=https://www.alphavantage.co/>Alpha Vantage</a> which is a market data provider with a generous free tier which gives unlimited access to global market data, but it comes with a strong rate limit on the speed at which you can read it.</p><p>So I went to work and developed a few Python scripts that would slowly crawl Alpha Vantage each day and collect price and company information in a database from which I could easily run query or make simulations via <a href=https://jupyter.org/>Jupiter Notebooks</a>.</p><p>I managed to get a working crawler but then quickly lost my interest in developing strategies. Instead of throwing away my work I decided to turn it in a basic stock market screener to add to my portfolio by adding a web interface on top.</p><p><figure><a href=/blog/stock-screener/images/architecture.svg><picture><img class=md__image src=/blog/stock-screener/images/architecture.svg alt="Architecture Diagram"></picture></a><figcaption><small><i>Architecture Diagram</i></small></figcaption></figure></p><p>The project is mainly composed of 3 components: the Data Ingestion service, the Database, and the Stock Screener web app. They are all hosted on <a href=https://azure.microsoft.com/en-gb/>Microsoft Azure</a>.</p><p>The arrows in the diagram represent the flow of market data.</p><p>The Data Ingestion service is the crawler that I mentioned earlier. It is written in Python and uses <a href=https://www.python-httpx.org/>httpx</a> to download data from Alpha Vantage and <a href=https://github.com/mkleehammer/pyodbc/wiki>pyodbc</a> to talk with the database. I spent some time learning how to use async programming with Python to be able to parallelize the HTTP requests to Alpha Vantage, but then I hit the bottleneck of pyodbc which does not have async support at the moment.</p><p><figure><a href=/blog/stock-screener/images/screenshot1.png><picture><source media=(min-width:600px) srcset=/blog/stock-screener/images/screenshot1_hu_2ed772ca555bfc91.png><source media=(min-width:1200px) srcset=/blog/stock-screener/images/screenshot1_hu_ed2ab6737022ca23.png><img class=md__image src=/blog/stock-screener/images/screenshot1_hu_94c61e212cc8b441.png alt="Stock List"></picture></a><figcaption><small><i>Stock List</i></small></figcaption></figure></p><p>The Database is a classic relational SQL database which is good enough for my use case, without having to disturb the folks in the NoSQL world.</p><p>The Web App is built with <a href=https://dotnet.microsoft.com/en-us/apps/aspnet>ASP.NET Core</a>. The frontend uses Bootstrap 5, <a href=https://htmx.org/>htmx</a> and <a href=https://alpinejs.dev/>Alpine.js</a>.</p><p>This is the first time I have worked with ASP.NET. Overall it was a good experience, ASP.NET is a mature technology with plenty of documentation. I developed the web app entirely within Visual Studio 2022 to see what Microsoft is up these days and I found it very simple to use and quite snappy. I was surprised to find out that Visual Studio Code with the C# Extension is capable to replace Visual Studio entirely, debugging capabilities included! I could do the development entirely on Linux or Mac seamlessly.</p><p><figure><a href=/blog/stock-screener/images/screenshot2.png><picture><source media=(min-width:600px) srcset=/blog/stock-screener/images/screenshot2_hu_ff39b89b61aa1fbb.png><source media=(min-width:1200px) srcset=/blog/stock-screener/images/screenshot2_hu_6d0a213a951e27bc.png><img class=md__image src=/blog/stock-screener/images/screenshot2_hu_25a523fddd11f24a.png alt="Company Overview"></picture></a><figcaption><small><i>Company Overview</i></small></figcaption></figure></p><p>The code is hosted on <a href=https://github.com/skilion/stock-screener>GitHub</a>. A running demo can be accessed at <a href=http://stock-screener-web-app.azurewebsites.net>http://stock-screener-web-app.azurewebsites.net</a> at least until the billing starts to be higher than a few quids a month.</p></div></article></main><footer></footer></body></html>