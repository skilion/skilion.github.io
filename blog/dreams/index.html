<!doctype html><html lang=en><head><meta charset=utf-8><script async src="https://www.googletagmanager.com/gtag/js?id=G-64J3C3W6RC"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-64J3C3W6RC")</script><title>We Are Made of Dreams &ndash; Andrea Radaelli</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/syntax.css><link rel=icon href=/favicon.ico type=image/x-icon><link rel=alternate type=application/rss+xml href=/blog/index.xml title="Andrea Radaelli's Blog"></head><body><header><nav><a href=/>Home</a>
<a href=/about/>About</a></nav></header><main><article class=article-container><div class=article-content><h1>We Are Made of Dreams</h1><p class=page-date>12 October 2014 (Updated on: 11 February 2022)</p><h2 id=intro>Intro</h2><p>For me, Minecraft could easily be the greatest game of all time. The main reasons being that it is a &ldquo;meta-game&rdquo;, a game that allows you to build other games.</p><p><figure><a href=/blog/dreams/images/minecraft.jpg><picture><source media=(min-width:600px) srcset=/blog/dreams/images/minecraft_hu_98193caba59b47c2.jpg><source media=(min-width:1200px) srcset=/blog/dreams/images/minecraft_hu_d0b1de21880dc57d.jpg><img class=md__image src=/blog/dreams/images/minecraft_hu_bb3b5eeb804d0061.jpg alt=Minecraft></picture></a><figcaption><small><i>Minecraft</i></small></figcaption></figure></p><p>The first time I played it I was confused by the absence of a story to follow or objective to complete. But the more I played it, the more I started to be addicted because I was building my own world and creating my own rules! The utter simplicity and freedom that a world made of blocks could create really impressed me. Furthermore, people online created (and still are creating) staggering detailed worlds and custom games using official and custom servers.</p><p>After playing Minecraft for a long time, I could not resist to try to build my own 3D engine and replicate the technology behind it. I read many articles which explained the inner workings of the game and then get to code.</p><p>When I got a prototype working, I was puzzled on what to make out of it.</p><p>I didn&rsquo;t want to embark in making a full video game, so I decided to build a self-contained experience, a <a href=https://en.wikipedia.org/wiki/Demoscene>demo</a>; or in simpler terms, an &ldquo;interactive video&rdquo;.</p><div class=vimeo><div style="padding:56.25% 0 0;position:relative"><iframe src="https://player.vimeo.com/video/223964278?h=25900eaca6&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder=0 allow="autoplay; fullscreen; picture-in-picture" allowfullscreen style=position:absolute;top:0;left:0;width:100%;height:100%></iframe></div></div><script src=https://player.vimeo.com/api/player.js></script><h2 id=analysis>Analysis</h2><p>The code is written in <a href=https://dlang.org/>D</a> as at the time I decided it would become my go to language after a long search for a modern alternative to C++.</p><p>Reading through the code today, the most interesting things are: the world data structure and the renderer architecture.</p><p>The world is implemented as an <a href=https://en.wikipedia.org/wiki/Octree><em>octree</em></a>. An octree can be visualized as a giant cube that encloses all the space available for your world. Each node of the octree divides the space inside the cube in 8 sub-cubes. Then again each cube is recursively split in 8 more sub-cubes, until you arrive to the leaf nodes. A leaf node is the smallest representable unit of the world and it is represented as a single block on the screen.</p><p><figure><a href=/blog/dreams/images/octree.png><picture><source media=(min-width:600px) srcset=/blog/dreams/images/octree_hu_54a19df92c7179b7.png><source media=(min-width:1200px) srcset=/blog/dreams/images/octree_hu_54b2a724faf8ad8d.png><img class=md__image src=/blog/dreams/images/octree_hu_cc6887de3dcb7ef6.png alt="Octree representation, source: mshgrid.com"></picture></a><figcaption><small><i>Octree representation, source: mshgrid.com</i></small></figcaption></figure></p><p>An octree is ideal for a &ldquo;Minecraft like&rdquo; world for two reasons.</p><p>First, it naturally fits a world made of cubes beacause of its direct mapping of leaf nodes to world blocks.</p><p>Second, it is very memory efficient when there are big empty spaces because the leaf nodes are not required to exist at all in memory. That is in contrast to a simple three-dimensional array which would still need to allocate the memeory but mark all the empty elements as &ldquo;null&rdquo;.</p><p>The renderer is built using OpenGL3 and therefore it uses the modern rendering pipeline using shaders. The render is also multithreaded by using multiple worker threads that build meshes in real time every time a world chunk is modified.</p><p>Another thing I love is the built in map editor that allowed me to create the world that you can see in the demo.</p><video controls>
<source src=/blog/dreams/videos/editor.mp4 type=video/mp4></video><h2 id=downloads>Downloads</h2><p>The source code is available on <a href=https://github.com/skilion/dreams>GitHub</a> and it can be readily compiled on Windows and Linux. Pre-compiled binaries are also available.</p></div></article></main><footer></footer></body></html>